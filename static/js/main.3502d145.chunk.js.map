{"version":3,"sources":["media/countdown.mp3","workers/letters.worker.ts","workers/numbers.worker.ts","game/actions.ts","game/reducer.ts","hooks/useCountdownGame.ts","hooks/useLocalStorage.ts","game/selectors.ts","components/LetterCard/LetterCard.tsx","components/Selection/Selection.tsx","components/NewGame/NewGame.tsx","hooks/useEventListener.ts","components/BetweenRounds/BetweenRounds.tsx","solvers/lettersSolver.ts","hooks/useLettersDeclaration.ts","hooks/useLettersSolution.ts","hooks/useTimer.ts","hooks/useInterval.ts","components/Timer/Timer.tsx","components/LettersRound/LettersRound.tsx","hooks/useNumbersDeclaration.ts","hooks/useNumbersSelection.ts","hooks/useNumbersSolution.ts","solvers/numbersSolver.ts","components/NumbersRound/NumbersRound.tsx","hooks/useConundrum.ts","components/ConundrumRound/ConundrumRound.tsx","components/Recap/Recap.tsx","components/GameOver/GameOver.tsx","app/App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","addMethods","methods","w","Worker","name","setPlayerNames","p1Name","p2Name","type","startGame","variant","reduce","game","createNewGame","action","startLettersRound","drawConsonant","drawVowel","setLettersRoundResult","startNumbersRound","drawLarge","drawSmall","setTarget","setNumbersRoundResult","startConundrumRound","revealConundrum","setP1ConundrumDeclaration","setP2ConundrumDeclaration","solveConundrum","endRound","undefined","rounds","consonantPile","shuffleConsonants","vowelPile","shuffleVowels","largePile","shuffle","newLargePile","smallPile","newSmallPile","newLettersRound","updateLettersRound","updater","slice","length","consonant","round","selection","vowel","p1Declaration","p2Declaration","p1Score","p2Score","maxes","newNumbersRound","updateNumbersRound","large","small","value","target","max","newConundrumRound","updateConundrumRound","scramble","answer","buzzTime","declaration","p1BuzzTime","solved","p2BuzzTime","finished","method","isBadConsonant","letter","includes","pile","weightedShuffle","reverse","i","Math","random","indicesToSwap","Array","map","_","idx","filter","randomIndex","floor","vowelToIgnore","cards","index","splice","pop","_items","items","j","useCountdownGame","key","initialValue","useState","item","localStorage","getItem","JSON","parse","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","useLocalStorage","setGame","ROUNDS_9","picker","ROUNDS_15","getCurrentRound","getCurrentRoundDescription","roundIndex","getRoundDescription","getP1TotalScore","p1Scores","r","x","y","getP2TotalScore","p2Scores","getP1CumulativeScore","getP2CumulativeScore","getMaxCumulativeScore","maxForLettersRound","maxForNumbersRound","distanceFromTarget","abs","gameOver","numberOfRounds","template","squash","content","transform","LetterCard","className","style","Selection","str","NewGame","dispatch","onChange","e","onClick","useEventListener","eventName","handler","savedHandler","useRef","useEffect","current","eventListener","event","window","addEventListener","removeEventListener","roundSummary","description","BetweenRounds","nextRoundDescription","getNextRoundDescription","startNextRound","keyCode","words","checkValidity","word","lo","hi","mid","useLettersDeclarations","_declaration","_setDeclaration","score","setScore","setDeclaration","isValid","isContainedInSelection","selectionCounts","letterCounts","declarationCounts","Object","keys","every","c","counts","useLettersSolution","validWords","setValidWords","maxLength","setMaxLength","arr","indexOf","addWord","ml","onWordFound","worker","lettersWorker","message","data","findWordsFromSelection","terminate","findAllWordsFromSelection","useTimer","seconds","onExpire","timeRemaining","setTimeRemaining","isRunning","setIsRunning","isExpired","setIsExpired","callback","delay","savedCallback","id","setInterval","clearInterval","useInterval","time","startTimer","resumeTimer","stopTimer","expireTimer","progressBarStyle","remaining","duration","width","Timer","secondsRemaining","durationSeconds","LettersRoundComponent","roundDescription","declarationsSubmitted","setDeclarationsSubmitted","useSound","countdownTheme","startSound","setP1Declaration","setP2Declaration","submitText","submitDeclarations","pickConsonant","countConsonants","pickVowel","countVowels","startRound","repeat","extendSelection","disabled","toUpperCase","trim","join","isVowel","extended","push","useNumbersDeclarations","valid","_setValid","scoreForDeclaration","setValid","useNumbersSelection","_dispatch","selectedLarges","_setSelectedLarges","selectionHasBeenMade","setSelectedLarges","larges","setTimeout","useNumbersSolution","setMax","addSolution","numbers","onMethodFound","numbersWorker","findNumbersMethods","ConundrumRoundState","NumbersRoundComponent","p1Valid","setP1Valid","p2Valid","setP2Valid","makeSelection","inputKeydown","stopPropagation","tabIndex","onKeyDown","checked","n","toString","randomConundrum","pickRandomConundrumAnswer","decentShuffle","numberOfConundrums","conundrums","singleShuffle","inversions","ConundrumRoundComponent","initialState","roundState","setRoundState","EXPIRED","pauseSound","pause","setBuzzTime","p1HasDeclared","setP1HasDeclared","p2HasDeclared","setP2HasDeclared","resume","TICKING","incorrect","INCORRECT","expired","SOLVED","buzz","GUESSING","declareForP1","guess","declareForP2","useConundrum","WAITING","showBuzzer","showReveal","emptySelection","incorrectSelection","getSelection","handleP1KeyDown","handleP2KeyDown","Recap","renderRoundRow","title","renderLettersRow","renderNumbersRow","normalizeBuzzTime","renderConundrumRow","roundedBuzzTime","min","toFixed","rd","GameOver","App","gameState","getGameState","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.3502d145.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/countdown.d27402a0.mp3\";","\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"findWordsFromSelection\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"f05cf2c66bd187b54b21.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"findNumbersMethods\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"4acad30b378599668454.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","import { Variant } from './game';\r\n\r\nexport const createNewGame = (): CreateNewGameAction => ({\r\n    type: 'CREATE_NEW_GAME'\r\n});\r\n\r\nexport const setPlayerNames = (p1Name: string, p2Name: string): SetPlayerNamesAction => ({\r\n    type: 'SET_PLAYER_NAMES',\r\n    p1Name, p2Name\r\n});\r\n\r\nexport const startGame = (variant: Variant): StartGameAction => ({\r\n    type: 'START_GAME',\r\n    variant\r\n});\r\n\r\nexport const startLettersRound = (): StartLettersRoundAction => ({\r\n    type: 'START_LETTERS_ROUND'\r\n});\r\n\r\nexport const drawConsonant = (): DrawConsonantAction => ({\r\n    type: 'DRAW_CONSONANT'\r\n});\r\n\r\nexport const drawVowel = (): DrawVowelAction => ({\r\n    type: 'DRAW_VOWEL'\r\n});\r\n\r\nexport const setLettersRoundResult = (p1Declaration: string, p2Declaration: string, p1Score: number, p2Score: number, maxes: string[]): SetLettersRoundResultAction => ({\r\n    type: 'SET_LETTERS_ROUND_RESULT',\r\n    p1Declaration, p2Declaration, p1Score, p2Score, maxes\r\n});\r\n\r\nexport const startNumbersRound = (): StartNumbersRoundAction => ({\r\n    type: 'START_NUMBERS_ROUND'\r\n});\r\n\r\nexport const drawLarge = (): DrawLargeAction => ({\r\n    type: 'DRAW_LARGE'\r\n});\r\n\r\nexport const drawSmall = (): DrawSmallAction => ({\r\n    type: 'DRAW_SMALL'\r\n});\r\n\r\nexport const setTarget = (): SetTargetAction => ({\r\n    type: 'SET_TARGET',\r\n    value: 100 + Math.floor(900 * Math.random())\r\n});\r\n\r\nexport const setNumbersRoundResult = (p1Declaration: number, p2Declaration: number, p1Score: number, p2Score: number, max: {value: number, method: string}): SetNumbersRoundResultAction => ({\r\n    type: 'SET_NUMBERS_ROUND_RESULT',\r\n    p1Declaration, p2Declaration, p1Score, p2Score, max\r\n});\r\n\r\nexport const startConundrumRound = (): StartConundrumRoundAction => ({\r\n    type: 'START_CONUNDRUM_ROUND'\r\n});\r\n\r\nexport const revealConundrum = (scramble: string, answer: string): RevealConundrumAction => ({\r\n    type: 'REVEAL_CONUNDRUM',\r\n    scramble, answer\r\n});\r\n\r\nexport const setP1ConundrumDeclaration = (buzzTime: number, declaration: string): SetP1ConundrumDeclarationAction => ({\r\n    type: 'SET_P1_CONUNDRUM_DECLARATION',\r\n    buzzTime, declaration\r\n});\r\n\r\nexport const setP2ConundrumDeclaration = (buzzTime: number, declaration: string): SetP2ConundrumDeclarationAction => ({\r\n    type: 'SET_P2_CONUNDRUM_DECLARATION',\r\n    buzzTime, declaration\r\n});\r\n\r\nexport const solveConundrum = (): SolveConundrumAction => ({\r\n    type: 'SOLVE_CONUNDRUM'\r\n});\r\n\r\nexport const endRound = (): EndRoundAction => ({\r\n    type: 'END_ROUND'\r\n});\r\n\r\nexport interface CreateNewGameAction {\r\n    type: 'CREATE_NEW_GAME';\r\n}\r\n\r\nexport interface SetPlayerNamesAction {\r\n    type: 'SET_PLAYER_NAMES';\r\n    p1Name: string;\r\n    p2Name: string;\r\n}\r\n\r\nexport interface StartGameAction {\r\n    type: 'START_GAME';\r\n    variant: Variant;\r\n}\r\n\r\nexport interface StartLettersRoundAction {\r\n    type: 'START_LETTERS_ROUND';\r\n}\r\n\r\nexport interface DrawConsonantAction {\r\n    type: 'DRAW_CONSONANT';\r\n}\r\n\r\nexport interface DrawVowelAction {\r\n    type: 'DRAW_VOWEL';\r\n}\r\n\r\nexport interface SetLettersRoundResultAction {\r\n    type: 'SET_LETTERS_ROUND_RESULT';\r\n    p1Declaration: string;\r\n    p2Declaration: string;\r\n    p1Score: number;\r\n    p2Score: number;\r\n    maxes: string[];\r\n}\r\n\r\nexport interface StartNumbersRoundAction {\r\n    type: 'START_NUMBERS_ROUND';\r\n}\r\n\r\nexport interface DrawLargeAction {\r\n    type: 'DRAW_LARGE';\r\n}\r\n\r\nexport interface DrawSmallAction {\r\n    type: 'DRAW_SMALL';\r\n}\r\n\r\nexport interface SetTargetAction {\r\n    type: 'SET_TARGET';\r\n    value: number;\r\n}\r\n\r\nexport interface SetNumbersRoundResultAction {\r\n    type: 'SET_NUMBERS_ROUND_RESULT';\r\n    p1Declaration: number;\r\n    p2Declaration: number;\r\n    p1Score: number;\r\n    p2Score: number;\r\n    max: {value: number, method: string};\r\n}\r\n\r\nexport interface StartConundrumRoundAction {\r\n    type: 'START_CONUNDRUM_ROUND';\r\n}\r\n\r\nexport interface RevealConundrumAction {\r\n    type: 'REVEAL_CONUNDRUM';\r\n    scramble: string;\r\n    answer: string;\r\n}\r\n\r\nexport interface SetP1ConundrumDeclarationAction {\r\n    type: 'SET_P1_CONUNDRUM_DECLARATION';\r\n    buzzTime: number;\r\n    declaration: string;\r\n}\r\n\r\nexport interface SetP2ConundrumDeclarationAction {\r\n    type: 'SET_P2_CONUNDRUM_DECLARATION';\r\n    buzzTime: number;\r\n    declaration: string;\r\n}\r\n\r\nexport interface SolveConundrumAction {\r\n    type: 'SOLVE_CONUNDRUM';\r\n}\r\n\r\nexport interface EndRoundAction {\r\n    type: 'END_ROUND';\r\n}\r\n\r\nexport type CountdownAction = CreateNewGameAction | SetPlayerNamesAction | StartGameAction | StartLettersRoundAction | DrawConsonantAction | DrawVowelAction | SetLettersRoundResultAction | StartNumbersRoundAction | DrawLargeAction | DrawSmallAction | SetTargetAction | SetNumbersRoundResultAction | StartConundrumRoundAction | RevealConundrumAction | SetP1ConundrumDeclarationAction | SetP2ConundrumDeclarationAction | SolveConundrumAction | EndRoundAction;\r\n","import { CountdownGame, LettersRound, NumbersRound, ConundrumRound } from './game'\r\nimport { CountdownAction, StartGameAction, SetPlayerNamesAction, SetLettersRoundResultAction, SetTargetAction, SetNumbersRoundResultAction, RevealConundrumAction, SetP1ConundrumDeclarationAction, SetP2ConundrumDeclarationAction } from './actions'\r\n\r\nexport default function reduce(game: CountdownGame = createNewGame(), action: CountdownAction): CountdownGame {\r\n    switch (action.type) {\r\n        case 'CREATE_NEW_GAME': return createNewGame();\r\n        case 'SET_PLAYER_NAMES': return setPlayerNames(game, action);\r\n        case 'START_GAME': return startGame(game, action);\r\n        case 'START_LETTERS_ROUND': return startLettersRound(game);\r\n        case 'DRAW_CONSONANT': return drawConsonant(game);\r\n        case 'DRAW_VOWEL': return drawVowel(game);\r\n        case 'SET_LETTERS_ROUND_RESULT': return setLettersRoundResult(game, action);\r\n        case 'START_NUMBERS_ROUND': return startNumbersRound(game);\r\n        case 'DRAW_LARGE': return drawLarge(game);\r\n        case 'DRAW_SMALL': return drawSmall(game);\r\n        case 'SET_TARGET': return setTarget(game, action);\r\n        case 'SET_NUMBERS_ROUND_RESULT': return setNumbersRoundResult(game, action);\r\n        case 'START_CONUNDRUM_ROUND': return startConundrumRound(game);\r\n        case 'REVEAL_CONUNDRUM': return revealConundrum(game, action);\r\n        case 'SET_P1_CONUNDRUM_DECLARATION': return setP1ConundrumDeclaration(game, action);\r\n        case 'SET_P2_CONUNDRUM_DECLARATION': return setP2ConundrumDeclaration(game, action);\r\n        case 'SOLVE_CONUNDRUM': return solveConundrum(game);\r\n        case 'END_ROUND': return endRound(game);\r\n        default: return game;\r\n    }\r\n}\r\n\r\nconst createNewGame = (): CountdownGame => ({\r\n    p1Name: 'Player 1',\r\n    p2Name: 'Player 2',\r\n    variant: undefined,\r\n    rounds: [],\r\n    consonantPile: shuffleConsonants(),\r\n    vowelPile: shuffleVowels(),\r\n    largePile: shuffle(newLargePile()),\r\n    smallPile: shuffle(newSmallPile())\r\n});\r\n\r\nconst setPlayerNames = (game: CountdownGame, {p1Name, p2Name}: SetPlayerNamesAction): CountdownGame => ({\r\n    ...game,\r\n    p1Name, p2Name\r\n});\r\n\r\nconst startGame = (game: CountdownGame, {variant}: StartGameAction): CountdownGame => ({\r\n    ...game,\r\n    variant\r\n});\r\n\r\nconst startLettersRound = (game: CountdownGame): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds,\r\n        newLettersRound()\r\n    ]\r\n});\r\n\r\nconst updateLettersRound = (game: CountdownGame, updater: (_: LettersRound) => LettersRound): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds.slice(0, -1),\r\n        updater(game.rounds[game.rounds.length - 1] as LettersRound)\r\n    ]\r\n});\r\n\r\nconst drawConsonant = (game: CountdownGame): CountdownGame => {\r\n    const consonant = game.consonantPile[0];\r\n    return {\r\n        ...updateLettersRound(game, round => ({\r\n            ...round,\r\n            selection: [...round.selection, consonant]\r\n        })),\r\n        consonantPile: game.consonantPile.slice(1),\r\n    }\r\n};\r\n\r\nconst drawVowel = (game: CountdownGame): CountdownGame => {\r\n    const vowel = game.vowelPile[0];\r\n    return {\r\n        ...updateLettersRound(game, round => ({\r\n            ...round,\r\n            selection: [...round.selection, vowel]\r\n        })),\r\n        vowelPile: game.vowelPile.slice(1),\r\n    };\r\n};\r\n\r\nconst setLettersRoundResult = (game: CountdownGame, {p1Declaration, p2Declaration, p1Score, p2Score, maxes}: SetLettersRoundResultAction): CountdownGame => updateLettersRound(game, round => ({\r\n    ...round,\r\n    p1Declaration, p2Declaration, p1Score, p2Score, maxes\r\n}));\r\n\r\nconst startNumbersRound = (game: CountdownGame): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds,\r\n        newNumbersRound()\r\n    ],\r\n    largePile: shuffle(newLargePile()),\r\n    smallPile: shuffle(newSmallPile())\r\n});\r\n\r\nconst updateNumbersRound = (game: CountdownGame, updater: (_: NumbersRound) => NumbersRound): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds.slice(0, -1),\r\n        updater(game.rounds[game.rounds.length - 1] as NumbersRound)\r\n    ]\r\n});\r\n\r\nconst drawLarge = (game: CountdownGame): CountdownGame => {\r\n    const large = game.largePile[0];\r\n    return {\r\n        ...updateNumbersRound(game, round => ({\r\n            ...round,\r\n            selection: [large, ...round.selection]\r\n        })),\r\n        largePile: game.largePile.slice(1)\r\n    };\r\n};\r\n\r\nconst drawSmall = (game: CountdownGame): CountdownGame => {\r\n    const small = game.smallPile[0];\r\n    return {\r\n        ...updateNumbersRound(game, round => ({\r\n            ...round,\r\n            selection: [small, ...round.selection]\r\n        })),\r\n        smallPile: game.smallPile.slice(1)\r\n    };\r\n};\r\n\r\nconst setTarget = (game: CountdownGame, {value}: SetTargetAction): CountdownGame => updateNumbersRound(game, round => ({\r\n    ...round,\r\n    target: value\r\n}));\r\n\r\nconst setNumbersRoundResult = (game: CountdownGame, {p1Declaration, p2Declaration, p1Score, p2Score, max}: SetNumbersRoundResultAction): CountdownGame => updateNumbersRound(game, round => ({\r\n    ...round,\r\n    p1Declaration, p2Declaration, p1Score, p2Score, max\r\n}));\r\n\r\nconst startConundrumRound = (game: CountdownGame): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds,\r\n        newConundrumRound()\r\n    ]\r\n});\r\n\r\nconst updateConundrumRound = (game: CountdownGame, updater: (_: ConundrumRound) => ConundrumRound): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds.slice(0, -1),\r\n        updater(game.rounds[game.rounds.length - 1] as ConundrumRound)\r\n    ]\r\n});\r\n\r\nconst revealConundrum = (game: CountdownGame, {scramble, answer}: RevealConundrumAction): CountdownGame => updateConundrumRound(game, round => ({\r\n    ...round,\r\n    scramble, answer\r\n}));\r\n\r\nconst setP1ConundrumDeclaration = (game: CountdownGame, {buzzTime, declaration}: SetP1ConundrumDeclarationAction): CountdownGame => updateConundrumRound(game, round => ({\r\n    ...round,\r\n    p1BuzzTime: buzzTime,\r\n    p1Declaration: declaration,\r\n    p1Score: declaration === round.answer ? 10 : 0,\r\n    solved: declaration === round.answer\r\n}));\r\n\r\nconst setP2ConundrumDeclaration = (game: CountdownGame, {buzzTime, declaration}: SetP2ConundrumDeclarationAction): CountdownGame => updateConundrumRound(game, round => ({\r\n    ...round,\r\n    p2BuzzTime: buzzTime,\r\n    p2Declaration: declaration,\r\n    p2Score: declaration === round.answer ? 10 : 0,\r\n    solved: declaration === round.answer\r\n}));\r\n\r\nconst solveConundrum = (game: CountdownGame): CountdownGame => updateConundrumRound(game, round => ({\r\n    ...round,\r\n    solved: true\r\n}));\r\n\r\nconst endRound = (game: CountdownGame): CountdownGame => ({\r\n    ...game,\r\n    rounds: [\r\n        ...game.rounds.slice(0, -1),\r\n        {\r\n            ...game.rounds[game.rounds.length - 1],\r\n            finished: true\r\n        }\r\n    ]\r\n});\r\n\r\nconst newLettersRound = (): LettersRound => ({\r\n    type: 'LETTERS',\r\n    selection: [],\r\n    maxes: [],\r\n    finished: false,\r\n    p1Declaration: undefined,\r\n    p2Declaration: undefined,\r\n    p1Score: 0,\r\n    p2Score: 0\r\n});\r\n\r\nconst newNumbersRound = (): NumbersRound => ({\r\n    type: 'NUMBERS',\r\n    selection: [],\r\n    target: 0,\r\n    max: {value: 0, method: ''},\r\n    finished: false,\r\n    p1Declaration: undefined,\r\n    p2Declaration: undefined,\r\n    p1Score: 0,\r\n    p2Score: 0\r\n});\r\n\r\nconst newConundrumRound = (): ConundrumRound => ({\r\n    type: 'CONUNDRUM',\r\n    scramble: undefined,\r\n    answer: undefined,\r\n    solved: false,\r\n    finished: false,\r\n    p1BuzzTime: undefined,\r\n    p2BuzzTime: undefined,\r\n    p1Declaration: undefined,\r\n    p2Declaration: undefined,\r\n    p1Score: 0,\r\n    p2Score: 0\r\n});\r\n\r\nconst newConsonantPile = () => {\r\n    return [\r\n        'R', 'S', 'T', 'R', 'S', 'T', 'R', 'S', 'T',\r\n        'R', 'S', 'T', 'R', 'S', 'T', 'R', 'S', 'T',\r\n        'R', 'S', 'T', 'R', 'S', 'T', 'R', 'S', 'T',\r\n        'N', 'D', 'L', 'N', 'D', 'L', 'N', 'D', 'L', \r\n        'N', 'D', 'L', 'N', 'D', 'L', 'N', 'D', 'N', 'N',\r\n        'G', 'M', 'P', 'G', 'M', 'P',\r\n        'G', 'M', 'P', 'G', 'M', 'P',\r\n        'C', 'B', 'C', 'B', 'C',\r\n        'F', 'H', 'F', 'H', 'V', 'W', 'V', 'W',\r\n        'J', 'K', 'Q', 'X', 'Y', 'Z'\r\n    ].reverse();\r\n}\r\n\r\nconst newVowelPile = () => {\r\n    return [\r\n        'E', 'A', 'E', 'A', 'E', 'A', 'E',\r\n        'E', 'A', 'E', 'A', 'E', 'A', 'E',\r\n        'E', 'A', 'E', 'A', 'E', 'A', 'E',\r\n        'E', 'A', 'E', 'A', 'E', 'A', 'E',\r\n        'E', 'A', 'E', 'A', 'E', 'A', 'E',\r\n        'I', 'O', 'U', 'I', 'O',\r\n        'I', 'O', 'U', 'I', 'O',\r\n        'I', 'O', 'U', 'I', 'O',\r\n        'I', 'O', 'U', 'I', 'O',\r\n        'I', 'O', 'U', 'I', 'O',\r\n        'I', 'O', 'U', 'I', 'O',\r\n        'I', 'O', 'U'\r\n    ].reverse();\r\n}\r\n\r\nconst newLargePile = () => [100, 75, 50, 25];\r\n\r\nconst newSmallPile = () => [1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10];\r\n\r\nconst isBadConsonant = (letter: string) => ['C', 'B', 'F', 'H', 'V', 'W', 'J', 'K', 'Q', 'X', 'Y', 'Z'].includes(letter);\r\n\r\nconst shuffleConsonants = () => {\r\n    const pile = weightedShuffle(newConsonantPile());\r\n    for (let i = 0; i < pile.length - 2; ++i) {\r\n        if (isBadConsonant(pile[i]) && isBadConsonant(pile[i + 1]) && isBadConsonant(pile[i + 2]) && Math.random() < 0.9) {\r\n            const indicesToSwap = [...Array(pile.length - i - 3)].map((_, idx) => idx + i + 3).filter(idx => !isBadConsonant(pile[idx]));\r\n            if (indicesToSwap.length > 0) {\r\n                const randomIndex = Math.floor(Math.random() * indicesToSwap.length);\r\n                [pile[i + 1], pile[indicesToSwap[randomIndex]]] = [pile[indicesToSwap[randomIndex]], pile[i + 1]];\r\n            }\r\n        }\r\n    }\r\n    return pile;\r\n};\r\n\r\nconst shuffleVowels = () => {\r\n    const pile = weightedShuffle(newVowelPile());\r\n    for (let i = 0; i < pile.length - 3; ++i) {\r\n        if (pile[i] === pile[i + 1] && pile[i + 1] === pile[i + 2] && Math.random() < 0.9) {\r\n            const vowelToIgnore = pile[i];\r\n            const indicesToSwap = [...Array(pile.length - i - 3)].map((_, idx) => idx + i + 3).filter(idx => pile[idx] !== vowelToIgnore);\r\n            if (indicesToSwap.length > 0) {\r\n                const randomIndex = Math.floor(Math.random() * indicesToSwap.length);\r\n                [pile[i + 1], pile[indicesToSwap[randomIndex]]] = [pile[indicesToSwap[randomIndex]], pile[i + 1]];\r\n            }\r\n        }\r\n    }\r\n    return pile;\r\n};\r\n\r\nconst weightedShuffle = (cards: string[]) => {\r\n    const pile: string[] = [];\r\n    while (cards.length > 0) {\r\n        const index = Math.floor(pile.length * Math.random());\r\n        pile.splice(index, 0, cards.pop() as string);\r\n    }\r\n    return pile;\r\n}\r\n\r\nconst shuffle = <T>(_items: T[]) => {\r\n    const items = [..._items];\r\n    for (let i = items.length - 1; i > 0; --i) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [items[i], items[j]] = [items[j], items[i]];\r\n    }\r\n    return items;\r\n}\r\n","import useLocalStorage from './useLocalStorage';\r\nimport { CountdownGame } from '../game/game';\r\nimport { CountdownAction, createNewGame } from '../game/actions';\r\nimport reduce from '../game/reducer';\r\n\r\nexport default function useCountdownGame(): [CountdownGame, (_: CountdownAction) => void] {\r\n    const [game, setGame] = useLocalStorage<CountdownGame>('countdownGame', reduce(undefined, createNewGame()));\r\n    const dispatch = (action: CountdownAction) => setGame(game => reduce(game, action));\r\n    return [game, dispatch];\r\n}\r\n","import { useState } from 'react';\r\n\r\nexport default function useLocalStorage<T>(key: string, initialValue: T): [T, (_: (T | ((_: T) => T))) => void] {\r\n\r\n    const [storedValue, setStoredValue] = useState<T>(() => {\r\n        try {\r\n            const item = localStorage.getItem(key);\r\n            return item ? JSON.parse(item) : initialValue;\r\n        } catch {\r\n            return initialValue;\r\n        }\r\n    });\r\n\r\n    const setValue = (value: T | ((_: T) => T)) => {\r\n        const valueToStore = value instanceof Function ? value(storedValue) : value;\r\n        setStoredValue(valueToStore);\r\n        localStorage.setItem(key, JSON.stringify(valueToStore));\r\n    };\r\n\r\n    return [storedValue, setValue];\r\n}\r\n","import { CountdownGame, Round, LettersRound, NumbersRound } from './game';\r\n\r\nexport type GameState = 'WAITING' | 'BETWEEN' | 'LETTERS' | 'NUMBERS' | 'CONUNDRUM' | 'ENDED';\r\n\r\nexport interface RoundDescription {\r\n    type: 'LETTERS' | 'NUMBERS' | 'CONUNDRUM';\r\n    picker: string | undefined;\r\n}\r\n\r\nconst ROUNDS_9: {type: 'LETTERS' | 'NUMBERS' | 'CONUNDRUM', picker: number | undefined}[] = [\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'NUMBERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'NUMBERS', picker: 1 },\r\n    { type: 'CONUNDRUM', picker: undefined },\r\n];\r\n\r\nconst ROUNDS_15: {type: 'LETTERS' | 'NUMBERS' | 'CONUNDRUM', picker: number | undefined}[] = [\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'NUMBERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'NUMBERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'NUMBERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'LETTERS', picker: 2 },\r\n    { type: 'LETTERS', picker: 1 },\r\n    { type: 'NUMBERS', picker: 2 },\r\n    { type: 'CONUNDRUM', picker: undefined },\r\n];\r\n\r\nexport const getGameState = (game: CountdownGame): GameState => {\r\n    if (game.variant === undefined) return 'WAITING';\r\n    else if (game.rounds.length === 0) return 'BETWEEN';\r\n    else if (getCurrentRound(game).finished) return gameOver(game) ? 'ENDED' : 'BETWEEN';\r\n    else return game.rounds[game.rounds.length - 1].type;\r\n};\r\n\r\nexport const getCurrentRound = (game: CountdownGame): Round => {\r\n    return game.rounds[game.rounds.length - 1];\r\n}\r\n\r\nexport const getCurrentRoundDescription = (game: CountdownGame): RoundDescription => {\r\n    const roundIndex = game.rounds.length - 1;\r\n    return getRoundDescription(game, roundIndex);\r\n};\r\n\r\nexport const getNextRoundDescription = (game: CountdownGame): RoundDescription => {\r\n    const roundIndex = game.rounds.length;\r\n    return getRoundDescription(game, roundIndex);\r\n};\r\n\r\nexport const getP1TotalScore = (game: CountdownGame): number => {\r\n    return game.rounds.filter(p1Scores).map(r => r.p1Score).reduce((x, y) => x + y, 0);\r\n}\r\n\r\nexport const getP2TotalScore = (game: CountdownGame): number => {\r\n    return game.rounds.filter(p2Scores).map(r => r.p2Score).reduce((x, y) => x + y, 0);\r\n}\r\n\r\nexport const getP1CumulativeScore = (game: CountdownGame, index: number) => {\r\n    return game.rounds.slice(0, index + 1).filter(p1Scores).map(r => r.p1Score).reduce((x, y) => x + y, 0);\r\n}\r\n\r\nexport const getP2CumulativeScore = (game: CountdownGame, index: number) => {\r\n    return game.rounds.slice(0, index + 1).filter(p2Scores).map(r => r.p2Score).reduce((x, y) => x + y, 0);\r\n}\r\n\r\nexport const getMaxCumulativeScore = (game: CountdownGame, index: number) => {\r\n    const maxForRound = (round: Round) => round.type === 'LETTERS' ? maxForLettersRound(round) : round.type === 'NUMBERS' ? maxForNumbersRound(round) : 10;\r\n    return game.rounds.slice(0, index + 1).map(r => maxForRound(r)).reduce((x, y) => x + y, 0);\r\n}\r\n\r\nconst maxForLettersRound = (round: LettersRound) => round.maxes[0].length === 9 ? 18 : round.maxes[0].length;\r\n\r\nconst maxForNumbersRound = (round: NumbersRound) => {\r\n    const distanceFromTarget = Math.abs(round.target - round.max.value);\r\n    return distanceFromTarget === 0 ? 10 : distanceFromTarget <= 5 ? 7 : distanceFromTarget <= 10 ? 5 : 0;\r\n}\r\n\r\nconst p1Scores = (round: Round): boolean => {\r\n    if (round.type === 'LETTERS' || round.type === 'CONUNDRUM') return round.p1Score >= round.p2Score;\r\n    else if (round.type === 'NUMBERS') return (round.p1Score >= round.p2Score) && (round.p1Score > round.p2Score || Math.abs(round.target - (round.p1Declaration as number)) <= (Math.abs(round.target - (round.p2Declaration as number))));\r\n    return true;\r\n}\r\n\r\nconst p2Scores = (round: Round): boolean => {\r\n    if (round.type === 'LETTERS' || round.type === 'CONUNDRUM') return round.p2Score >= round.p1Score;\r\n    else if (round.type === 'NUMBERS') return (round.p2Score >= round.p1Score) && (round.p2Score > round.p1Score || Math.abs(round.target - (round.p2Declaration as number)) <= (Math.abs(round.target - (round.p1Declaration as number))));\r\n    return true;\r\n}\r\n\r\nconst numberOfRounds = (game: CountdownGame): number => {\r\n    if (game.variant === '9R') return 9;\r\n    else return 15;\r\n}\r\n\r\nconst gameOver = (game: CountdownGame): boolean => {\r\n    if (game.rounds.length >= numberOfRounds(game) && getCurrentRound(game).finished) {\r\n        return getP1TotalScore(game) !== getP2TotalScore(game);\r\n    }\r\n    return false;\r\n};\r\n\r\nconst getRoundDescription = (game: CountdownGame, index: number): RoundDescription => {\r\n    const template = (game.variant === '9R' ? ROUNDS_9[index] : ROUNDS_15[index]) || { type: 'CONUNDRUM', picker: undefined };\r\n    return {\r\n        type: template.type,\r\n        picker: template.picker === 1 ? game.p1Name : template.picker === 2 ? game.p2Name : undefined\r\n    };\r\n};\r\n","import React from 'react';\r\nimport './LetterCard.css';\r\n\r\nexport interface LetterCardProps {\r\n    content: string;\r\n}\r\n\r\nconst LetterCard: React.FC<LetterCardProps> = ({ content }) => {\r\n    return (\r\n        <div className={'letter-card ' + (content.length === 0 ? 'letter-card--empty' : '')}>\r\n            <div style={squash(content)}>{content}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst squash = (content: string) => ({\r\n    transform: content.length <= 1 ? 'scaleX(1)' : content.length === 2 ? 'scaleX(0.8)' : 'scaleX(0.6)'\r\n});\r\n\r\nexport default LetterCard;\r\n","import React from 'react';\r\nimport './Selection.css';\r\n\r\nimport LetterCard from '../LetterCard/LetterCard';\r\n\r\nexport interface SelectionProps {\r\n    selection: string[];\r\n}\r\n\r\nconst Selection: React.FC<SelectionProps> = ({ selection }) => {\r\n    return (\r\n        <div className=\"selection\">\r\n            {selection.map((str, idx) =>\r\n                <LetterCard key={idx} content={str}></LetterCard>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Selection;\r\n","import React from 'react';\r\nimport './NewGame.css';\r\n\r\nimport { setPlayerNames, startGame, CountdownAction } from '../../game/actions';\r\nimport { CountdownGame } from '../../game/game';\r\nimport Selection from '../Selection/Selection';\r\n\r\nexport interface NewGameProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst NewGame: React.FC<NewGameProps> = ({game, dispatch}) => {\r\n    return (\r\n        <div className=\"new-game\">\r\n            <div className=\"game__selection\">\r\n                <Selection selection={['C', 'O', 'U', 'N', 'T', 'D', 'O', 'W', 'N']}></Selection>\r\n            </div>\r\n            <div className=\"new-game__names\">\r\n                <div className=\"new-game__name\">\r\n                    <div className=\"new-game__label\">Player 1 Name</div>\r\n                    <input type=\"text\" value={game.p1Name} onChange={e => dispatch(setPlayerNames(e.target.value, game.p2Name))}></input>\r\n                </div>\r\n                <div className=\"new-game__name\">\r\n                    <div className=\"new-game__label\">Player 2 Name</div>\r\n                    <input type=\"text\" value={game.p2Name} onChange={e => dispatch(setPlayerNames(game.p1Name, e.target.value))}></input>\r\n                </div>\r\n            </div>\r\n            <div className=\"new-game__buttons\">\r\n                <button className=\"button--blue\" onClick={() => dispatch(startGame('9R'))}>Start 9-Rounder</button>\r\n                <button className=\"button--blue\" onClick={() => dispatch(startGame('15R'))}>Start 15-Rounder</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NewGame;\r\n","import { useRef, useEffect } from \"react\";\r\n\r\nexport default function useEventListener<T extends Event>(eventName: string, handler: (event: T) => void) {\r\n\r\n    const savedHandler = useRef(handler);\r\n    useEffect(() => {\r\n        savedHandler.current = handler\r\n    }, [handler]);\r\n\r\n    useEffect(() => {\r\n        const eventListener = (event: Event) => savedHandler.current(event as T);\r\n        window.addEventListener(eventName, eventListener);\r\n        return () => window.removeEventListener(eventName, eventListener);\r\n    }, [eventName]);\r\n}\r\n","import React from 'react';\r\nimport './BetweenRounds.css';\r\nimport { CountdownGame } from '../../game/game';\r\nimport { CountdownAction, startLettersRound, startNumbersRound, startConundrumRound } from '../../game/actions';\r\nimport { getP1TotalScore, getP2TotalScore, getNextRoundDescription, RoundDescription } from '../../game/selectors';\r\nimport useEventListener from '../../hooks/useEventListener';\r\n\r\nexport interface BetweenRoundsProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst BetweenRounds: React.FC<BetweenRoundsProps> = ({game, dispatch}) => {\r\n\r\n    const nextRoundDescription = getNextRoundDescription(game);\r\n\r\n    const startNextRound = () => {\r\n        switch (nextRoundDescription.type) {\r\n            case 'LETTERS': return dispatch(startLettersRound());\r\n            case 'NUMBERS': return dispatch(startNumbersRound());\r\n            case 'CONUNDRUM': return dispatch(startConundrumRound());\r\n        }\r\n    }\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n        if (e.keyCode === 32) {\r\n            startNextRound();\r\n        }\r\n    }\r\n\r\n    useEventListener('keydown', handleKeyDown);\r\n\r\n    return (\r\n        <div className=\"between-rounds\">\r\n            <div className=\"game__score\">{game.p1Name} {getP1TotalScore(game)} - {getP2TotalScore(game)} {game.p2Name}</div>\r\n            <div className=\"game__round-description\">The next round will be: {roundSummary(nextRoundDescription)}</div>\r\n            <button className=\"button--blue\" onClick={() => startNextRound()}>Start next round</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst roundSummary = (description: RoundDescription) => {\r\n    switch (description.type) {\r\n        case 'LETTERS': return `Letters picked by ${description.picker}`;\r\n        case 'NUMBERS': return `Numbers picked by ${description.picker}`;\r\n        case 'CONUNDRUM': return `Conundrum`;\r\n    }\r\n}\r\n\r\nexport default BetweenRounds;\r\n","// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport lettersWorker from 'workerize-loader!../workers/letters.worker';\r\nimport _words from '../data/words.json';\r\nconst words = _words.words;\r\n\r\nexport const checkValidity = (word: string): boolean => {\r\n    let [lo, hi] = [0, words.length - 1];\r\n    while (lo <= hi) {\r\n        const mid = Math.floor((lo + hi) / 2);\r\n        if (words[mid] === word) return true;\r\n        else if (words[mid] < word) lo = mid + 1;\r\n        else if (words[mid] > word) hi = mid - 1;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport const findAllWordsFromSelection = (selection: string[], onWordFound: (_: string) => void): (() => void) => {\r\n    const worker = lettersWorker();\r\n    worker.addEventListener('message', (message: any) => {\r\n        if (message.data.type === 'WORD') {\r\n            onWordFound(message.data.value);\r\n        }\r\n    });\r\n    worker.findWordsFromSelection(selection);\r\n    return () => worker.terminate();\r\n}\r\n","import { useState } from 'react';\r\n\r\nimport { checkValidity } from '../solvers/lettersSolver';\r\n\r\nexport default function useLettersDeclarations(selection: string[], _declaration: string = '') {\r\n    const [declaration, _setDeclaration] = useState(_declaration);\r\n    const [score, setScore] = useState(0);\r\n\r\n    const setDeclaration = (word: string) => {\r\n        const isValid = isContainedInSelection(word, selection) && checkValidity(word);\r\n        _setDeclaration(word);\r\n        setScore(isValid ? (word.length === 9 ? 18 : word.length) : 0);\r\n    };\r\n\r\n    return { declaration, setDeclaration, score };\r\n}\r\n\r\nconst isContainedInSelection = (word: string, selection: string[]): boolean => {\r\n    const selectionCounts = letterCounts(selection);\r\n    const declarationCounts = letterCounts([...word]);\r\n    return Object.keys(declarationCounts).every(c => selectionCounts[c] && selectionCounts[c] >= declarationCounts[c]);\r\n}\r\n\r\nconst letterCounts = (selection: string[]): {[s: string]: number} => {\r\n    const counts: {[s: string]: number} = {};\r\n    for (const letter of selection) counts[letter] = (counts[letter] || 0) + 1;\r\n    return counts;\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { findAllWordsFromSelection } from '../solvers/lettersSolver';\r\n\r\nexport default function useLettersSolution(selection: string[]) {\r\n\r\n    const [validWords, setValidWords] = useState<string[]>([]);\r\n    const [maxLength, setMaxLength] = useState(0);\r\n    const maxes = validWords.filter(w => w.length === maxLength).filter((word, idx, arr) => arr.indexOf(word) === idx);\r\n\r\n    const addWord = (word: string) => {\r\n        setValidWords(words => [...words, word]);\r\n        setMaxLength(ml => Math.max(ml, word.length));\r\n    };\r\n\r\n    useEffect(() => {\r\n        return findAllWordsFromSelection(selection, addWord);\r\n    }, [selection]);\r\n\r\n    return maxes;\r\n}\r\n","import { useState } from 'react';\r\n\r\nimport useInterval from './useInterval';\r\n\r\nexport default function useTimer(seconds: number, onExpire?: () => void) {\r\n\r\n    const [timeRemaining, setTimeRemaining] = useState(seconds);\r\n    const [isRunning, setIsRunning] = useState(false);\r\n    const [isExpired, setIsExpired] = useState(false);\r\n\r\n    useInterval(() => {\r\n        if (timeRemaining > 0) {\r\n            setTimeRemaining(time => Math.max(0, time - 0.02));\r\n        } else {\r\n            setIsRunning(false);\r\n            setIsExpired(true);\r\n            if (onExpire) onExpire();\r\n        }\r\n    }, isRunning ? 20 : null);\r\n\r\n    const startTimer = () => {\r\n        setTimeRemaining(seconds);\r\n        setIsRunning(true);\r\n    };\r\n\r\n    const resumeTimer = () => {\r\n        setIsRunning(true);\r\n    };\r\n\r\n    const stopTimer = () => {\r\n        setIsRunning(false);\r\n    };\r\n\r\n    const expireTimer = () => {\r\n        setIsExpired(true);\r\n    }\r\n\r\n    return { startTimer, resumeTimer, stopTimer, expireTimer, timeRemaining, isRunning, isExpired };\r\n}\r\n","import { useEffect, useRef } from 'react';\r\n\r\nexport default function useInterval(callback: () => void, delay: number | null) {\r\n\r\n    const savedCallback = useRef<() => void>();\r\n\r\n    useEffect(() => {\r\n        savedCallback.current = callback;\r\n    }, [callback]);\r\n\r\n    useEffect(() => {\r\n        if (delay !== null) {\r\n            let id = setInterval(() => savedCallback.current && savedCallback.current(), delay);\r\n            return () => clearInterval(id);\r\n        }\r\n    }, [delay]);\r\n}\r\n","import React from 'react';\r\nimport './Timer.css';\r\n\r\nexport interface TimerProps {\r\n    durationSeconds: number;\r\n    secondsRemaining: number;\r\n}\r\n\r\nconst Timer: React.FC<TimerProps> = ({ secondsRemaining, durationSeconds }) => {\r\n    return (\r\n        <div className=\"timer\">\r\n            <div className=\"timer__progress\" style={progressBarStyle(secondsRemaining, durationSeconds)}></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst progressBarStyle = (remaining: number, duration: number) => ({\r\n    width: `${100 * remaining / duration}%`\r\n});\r\n\r\nexport default Timer;\r\n","import React, { useState } from 'react';\r\nimport './LettersRound.css';\r\n\r\nimport useSound from 'use-sound';\r\nimport countdownTheme from '../../media/countdown.mp3';\r\n\r\nimport { getCurrentRoundDescription, getCurrentRound, getP1TotalScore, getP2TotalScore } from '../../game/selectors';\r\nimport { CountdownGame, LettersRound } from '../../game/game';\r\nimport { CountdownAction, drawConsonant, drawVowel, setLettersRoundResult, endRound } from '../../game/actions';\r\nimport Selection from '../Selection/Selection';\r\nimport useLettersDeclarations from '../../hooks/useLettersDeclaration';\r\nimport useLettersSolution from '../../hooks/useLettersSolution';\r\nimport useTimer from '../../hooks/useTimer';\r\nimport Timer from '../Timer/Timer';\r\nimport useEventListener from '../../hooks/useEventListener';\r\n\r\nexport interface LettersRoundProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst LettersRoundComponent: React.FC<LettersRoundProps> = ({game, dispatch}) => {\r\n\r\n    const roundDescription = getCurrentRoundDescription(game);\r\n    const selection = (getCurrentRound(game) as LettersRound).selection;\r\n    const [declarationsSubmitted, setDeclarationsSubmitted] = useState(false);\r\n\r\n    const {startTimer, timeRemaining, isRunning, isExpired} = useTimer(30);\r\n    const [startSound] = useSound(countdownTheme);\r\n\r\n    const maxes = useLettersSolution(selection);\r\n    const { declaration: p1Declaration, setDeclaration: setP1Declaration, score: p1Score } = useLettersDeclarations(selection);\r\n    const { declaration: p2Declaration, setDeclaration: setP2Declaration, score: p2Score } = useLettersDeclarations(selection);\r\n    const submitText = declarationsSubmitted ? 'Resubmit' : 'Submit';\r\n    const submitDeclarations = () => {\r\n        dispatch(setLettersRoundResult(p1Declaration, p2Declaration, p1Score, p2Score, maxes));\r\n        setDeclarationsSubmitted(true);\r\n    };\r\n\r\n    const pickConsonant = () => {\r\n        if (selection.length < 9 && countConsonants(selection) < 6) {\r\n            dispatch(drawConsonant());\r\n        }\r\n    };\r\n\r\n    const pickVowel = () => {\r\n        if (selection.length < 9 && countVowels(selection) < 5) {\r\n            dispatch(drawVowel());\r\n        }\r\n    };\r\n\r\n    const startRound = () => {\r\n        startTimer();\r\n        startSound({});\r\n    };\r\n\r\n    const handleKeydown = (e: KeyboardEvent) => {\r\n        if (e.repeat) return;\r\n        if (e.keyCode === 67) pickConsonant();\r\n        if (e.keyCode === 86) pickVowel();\r\n        if (e.keyCode === 32) {\r\n            if (!isRunning && !isExpired && selection.length === 9) startRound();\r\n            else if (isExpired && declarationsSubmitted) dispatch(endRound());\r\n        }\r\n        if (e.keyCode === 13) {\r\n            if (isExpired) submitDeclarations();\r\n        }\r\n    }\r\n\r\n    useEventListener('keydown', handleKeydown);\r\n\r\n    return (\r\n        <div className=\"letters-round\">\r\n            <div className=\"game__score\">{game.p1Name} {getP1TotalScore(game)} - {getP2TotalScore(game)} {game.p2Name}</div>\r\n            <div className=\"game__round-description\">Round {game.rounds.length}: Letters picked by {roundDescription.picker}</div>\r\n            <div className=\"game__selection\">\r\n                <Selection selection={extendSelection(selection)}></Selection>\r\n            </div>\r\n            {selection.length < 9 && <div className=\"letters-round__pick-actions\">\r\n                <button className=\"button--grey letters-round__pick\" disabled={countConsonants(selection) >= 6} onClick={pickConsonant}>Consonant (C)</button>\r\n                <button className=\"button--grey letters-round__pick\" disabled={countVowels(selection) >= 5} onClick={pickVowel}>Vowel (V)</button>\r\n            </div>}\r\n            {!isExpired && selection.length === 9 && <div className=\"letters-round__timer game__full-width\">\r\n                <Timer durationSeconds={30} secondsRemaining={timeRemaining}></Timer>\r\n                {!isRunning && !isExpired && <button className=\"button--green\" onClick={startRound}>Start the clock</button>}\r\n            </div>}\r\n            {isExpired && <div className=\"letters-round__declarations game__full-width\">\r\n                <div className=\"letters-round__inputs\">\r\n                    <div className=\"letters-round__declaration\">\r\n                        <div className=\"letters-round__name\">{game.p1Name}</div>\r\n                        <input type=\"text\" value={p1Declaration} onChange={e => setP1Declaration(e.target.value.toUpperCase().trim())}></input>\r\n                    </div>\r\n                    <div className=\"letters-round__declaration\">\r\n                        <div className=\"letters-round__name\">{game.p2Name}</div>\r\n                        <input type=\"text\" value={p2Declaration} onChange={e => setP2Declaration(e.target.value.toUpperCase().trim())}></input>\r\n                    </div>\r\n                </div>\r\n                <button className=\"letters-round__submit button--green\" onClick={() => submitDeclarations()}>{submitText}</button>\r\n            </div>}\r\n            {isExpired && declarationsSubmitted && <div className=\"letters-round__results-preview\">\r\n                <div className=\"letters-round__validity game__full-width\">\r\n                    <span>{p1Score > 0 ? 'Valid' : 'Invalid'}</span>\r\n                    <span>{p2Score > 0 ? 'Valid' : 'Invalid'}</span>\r\n                </div>\r\n                <div className=\"letters-round__maxes\">Best was: {maxes.join(', ')}</div>\r\n                <button className=\"letters-round__end button--blue\" onClick={() => dispatch(endRound())}>End round</button>\r\n            </div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LettersRoundComponent;\r\n\r\nconst isVowel = (letter: string): boolean => letter === 'A' || letter === 'E' || letter === 'I' || letter === 'O' || letter === 'U';\r\n\r\nconst countConsonants = (selection: string[]) => selection.filter(c => !isVowel(c)).length;\r\n\r\nconst countVowels = (selection: string[]) => selection.filter(c => isVowel(c)).length;\r\n\r\nconst extendSelection = (selection: string[]): string[] => {\r\n    const extended = [...selection];\r\n    while (extended.length < 9) {\r\n        extended.push('');\r\n    }\r\n    return extended;\r\n}\r\n","import { useState } from 'react';\r\n\r\nexport default function useNumbersDeclarations(target: number) {\r\n\r\n    const [declaration, _setDeclaration] = useState(0);\r\n    const [valid, _setValid] = useState(true);\r\n    const [score, setScore] = useState(0);\r\n\r\n    const setDeclaration = (value: number) => {\r\n        _setDeclaration(value);\r\n        setScore(valid ? scoreForDeclaration(value, target) : 0);\r\n    };\r\n\r\n    const setValid = (value: boolean) => {\r\n        _setValid(value);\r\n        setScore(value ? scoreForDeclaration(declaration, target): 0);\r\n    };\r\n\r\n    return { declaration, setDeclaration, valid, setValid, score };\r\n}\r\n\r\nconst scoreForDeclaration = (value: number, target: number): number => {\r\n    if (value === target) return 10;\r\n    if (value >= target - 5 && value <= target + 5) return 7;\r\n    if (value >= target - 10 && value <= target + 10) return 5;\r\n    return 0;\r\n};\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport { CountdownAction, drawSmall, drawLarge, setTarget } from '../game/actions';\r\n\r\nexport default function useNumbersSelection(_dispatch: (_: CountdownAction) => void) {\r\n\r\n    const [selectedLarges, _setSelectedLarges] = useState<number | undefined>(undefined);\r\n    const selectionHasBeenMade = selectedLarges !== undefined;\r\n\r\n    const dispatch = useRef(_dispatch);\r\n\r\n    useEffect(() => {\r\n        dispatch.current = _dispatch;\r\n    }, [_dispatch]);\r\n\r\n    const setSelectedLarges = (larges: number) => {\r\n        _setSelectedLarges(larges);\r\n        for (let i = 0; i < 6 - larges; ++i) {\r\n            setTimeout(() => dispatch.current(drawSmall()), 750 * (i + 1));\r\n        }\r\n        for (let i = 6 - larges; i < 6; ++i) {\r\n            setTimeout(() => dispatch.current(drawLarge()), 750 * (i + 1));\r\n        }\r\n        setTimeout(() => dispatch.current(setTarget()), 750 * 7);\r\n    };\r\n\r\n    return {selectionHasBeenMade, setSelectedLarges};\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { findNumbersMethods } from '../solvers/numbersSolver';\r\n\r\nexport default function useNumbersSolution(selection: number[], target: number) {\r\n\r\n    const [max, setMax] = useState<{value: number, method: string}>({value: 0, method: ''});\r\n    const addSolution = (value: number, method: string) => setMax({value, method});\r\n\r\n    useEffect(() => {\r\n        if (target !== undefined) {\r\n            return findNumbersMethods(selection, target, addSolution);\r\n        }\r\n    }, [selection, target]);\r\n\r\n    return max;\r\n}\r\n","// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport numbersWorker from 'workerize-loader!../workers/numbers.worker';\r\n\r\nexport const findNumbersMethods = (numbers: number[], target: number, onMethodFound: (value: number, method: string) => void): (() => void) => {\r\n    const worker = numbersWorker();\r\n    worker.addEventListener('message', (message: any) => {\r\n        if (message.data.type === 'METHOD') {\r\n            onMethodFound(message.data.value, message.data.method);\r\n        }\r\n    });\r\n    worker.findNumbersMethods(numbers, target);\r\n    return () => worker.terminate();\r\n}\r\n","import React, { useState, KeyboardEvent as KEvent } from 'react';\r\nimport './NumbersRound.css';\r\n\r\nimport useSound from 'use-sound';\r\nimport countdownTheme from '../../media/countdown.mp3';\r\n\r\nimport { getCurrentRoundDescription, getCurrentRound, getP1TotalScore, getP2TotalScore } from '../../game/selectors';\r\nimport { CountdownGame, NumbersRound } from '../../game/game';\r\nimport { CountdownAction, endRound, setNumbersRoundResult } from '../../game/actions';\r\nimport Selection from '../Selection/Selection';\r\nimport useNumbersDeclarations from '../../hooks/useNumbersDeclaration';\r\nimport useNumbersSelection from '../../hooks/useNumbersSelection';\r\nimport useNumbersSolution from '../../hooks/useNumbersSolution';\r\nimport useTimer from '../../hooks/useTimer';\r\nimport Timer from '../Timer/Timer';\r\nimport useEventListener from '../../hooks/useEventListener';\r\n\r\nexport interface NumbersRoundProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst NumbersRoundComponent: React.FC<NumbersRoundProps> = ({game, dispatch}) => {\r\n\r\n    const roundDescription = getCurrentRoundDescription(game);\r\n    const selection = (getCurrentRound(game) as NumbersRound).selection;\r\n    const target = (getCurrentRound(game) as NumbersRound).target;\r\n    const [declarationsSubmitted, setDeclarationsSubmitted] = useState(false);\r\n\r\n    const {startTimer, timeRemaining, isRunning, isExpired} = useTimer(30);\r\n    const [startSound] = useSound(countdownTheme);\r\n\r\n    const {selectionHasBeenMade, setSelectedLarges} = useNumbersSelection(dispatch);\r\n\r\n    const max = useNumbersSolution(selection, target);\r\n    const { declaration: p1Declaration, setDeclaration: setP1Declaration, valid: p1Valid, setValid: setP1Valid, score: p1Score } = useNumbersDeclarations(target);\r\n    const { declaration: p2Declaration, setDeclaration: setP2Declaration, valid: p2Valid, setValid: setP2Valid, score: p2Score } = useNumbersDeclarations(target);\r\n    const submitText = declarationsSubmitted ? 'Resubmit' : 'Submit';\r\n    const submitDeclarations = () => {\r\n        dispatch(setNumbersRoundResult(p1Declaration, p2Declaration, p1Score, p2Score, max));\r\n        setDeclarationsSubmitted(true);\r\n    };\r\n\r\n    const startRound = () => {\r\n        startTimer();\r\n        startSound({});\r\n    };\r\n\r\n    const makeSelection = (larges: number) => {\r\n        if (!selectionHasBeenMade && !target) {\r\n            setSelectedLarges(larges);\r\n        }\r\n    }\r\n\r\n    const handleKeydown = (e: KeyboardEvent) => {\r\n        if (e.repeat) return;\r\n        if (e.keyCode === 54) makeSelection(0);\r\n        if (e.keyCode >= 48 && e.keyCode <= 52) makeSelection(e.keyCode - 48);\r\n        if (e.keyCode === 32) {\r\n            if (!isRunning && !isExpired && !!target) startRound();\r\n            else if (declarationsSubmitted) dispatch(endRound());\r\n        }\r\n        if (e.keyCode === 13) {\r\n            if (isExpired) submitDeclarations();\r\n        }\r\n    }\r\n\r\n    const inputKeydown = (e: KEvent) => {\r\n        if (e.keyCode === 32) e.stopPropagation();\r\n    }\r\n\r\n    useEventListener('keydown', handleKeydown);\r\n\r\n    return (\r\n        <div className=\"numbers-round\">\r\n            <div className=\"game__score\">{game.p1Name} {getP1TotalScore(game)} - {getP2TotalScore(game)} {game.p2Name}</div>\r\n            <div className=\"game__round-description\">Round {game.rounds.length}: Numbers picked by {roundDescription.picker}</div>\r\n            <div className=\"numbers-round__target\">{target || '...'}</div>\r\n            <div className=\"game__selection\">\r\n                <Selection selection={extendSelection(selection)}></Selection>\r\n            </div>\r\n            {!selectionHasBeenMade && !target && <div className=\"numbers-round__pick-actions\">\r\n                <button className=\"button--grey\" onClick={() => makeSelection(0)}>6 small</button>\r\n                <button className=\"button--grey\" onClick={() => makeSelection(1)}>1 large</button>\r\n                <button className=\"button--grey\" onClick={() => makeSelection(2)}>2 large</button>\r\n                <button className=\"button--grey\" onClick={() => makeSelection(3)}>3 large</button>\r\n                <button className=\"button--grey\" onClick={() => makeSelection(4)}>4 large</button>\r\n            </div>}\r\n            {!!target && <div className=\"numbers-round__timer\">\r\n                <Timer durationSeconds={30} secondsRemaining={timeRemaining}></Timer>\r\n                {!isRunning && !isExpired && <button className=\"button--green\" onClick={startRound}>Start the clock</button>}\r\n            </div>}\r\n            {isExpired && <div className=\"numbers-round__declarations\">\r\n                <div className=\"numbers-round__inputs\">\r\n                    <div className=\"numbers-round__declaration\">\r\n                        <div className=\"numbers-round__name\">{game.p1Name}</div>\r\n                        <input tabIndex={1} type=\"number\" value={p1Declaration || undefined} onChange={e => setP1Declaration(+e.target.value)}></input>\r\n                        <div className=\"numbers-round__validity\">\r\n                            Valid?\r\n                            <input tabIndex={3} type=\"checkbox\" onKeyDown={inputKeydown} checked={p1Valid} onChange={e => setP1Valid(e.target.checked)}></input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"numbers-round__declaration\">\r\n                        <div className=\"numbers-round__name\">{game.p2Name}</div>\r\n                        <input tabIndex={2} type=\"number\" value={p2Declaration || undefined} onChange={e => setP2Declaration(+e.target.value)}></input>\r\n                        <div className=\"numbers-round__validity\">\r\n                            Valid?\r\n                            <input tabIndex={4} type=\"checkbox\" onKeyDown={inputKeydown} checked={p2Valid} onChange={e => setP2Valid(e.target.checked)}></input>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <button className=\"numbers-round__submit button--green\" onClick={() => submitDeclarations()}>{submitText}</button>\r\n            </div>}\r\n            {declarationsSubmitted && <div className=\"numbers-round__results-preview\">\r\n                <div className=\"numbers-round__maxes\">Best was: {max.value} = {max.method}</div>\r\n                <button className=\"numbers-round__end button--blue\" onClick={() => dispatch(endRound())}>End round</button>\r\n            </div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NumbersRoundComponent;\r\n\r\nconst extendSelection = (selection: number[]): string[] => {\r\n    const extended = [];\r\n    for (let i = 0; i < 6 - selection.length; ++i) {\r\n        extended.push('');\r\n    }\r\n    return [...extended, ...selection.map(n => n.toString())];\r\n}\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport useSound from 'use-sound';\r\nimport countdownTheme from '../media/countdown.mp3';\r\nimport conundrums from '../data/conundrums.json';\r\nimport { CountdownAction, revealConundrum, setP1ConundrumDeclaration, setP2ConundrumDeclaration } from '../game/actions';\r\nimport useTimer from './useTimer';\r\n\r\nexport enum ConundrumRoundState {\r\n    WAITING,\r\n    TICKING,\r\n    GUESSING,\r\n    INCORRECT,\r\n    EXPIRED,\r\n    SOLVED,\r\n}\r\n\r\nexport default function useConundrum(initialState: ConundrumRoundState, _dispatch: (_: CountdownAction) => void, answer: string | undefined) {\r\n\r\n    const dispatch = useRef(_dispatch);\r\n    useEffect(() => {\r\n        dispatch.current = _dispatch\r\n    }, [_dispatch]);\r\n\r\n    const [roundState, setRoundState] = useState(initialState);\r\n\r\n    const {resumeTimer, stopTimer, expireTimer, timeRemaining, isRunning, isExpired} = useTimer(32, () => {\r\n        setRoundState(ConundrumRoundState.EXPIRED);\r\n    });\r\n    const [startSound, {pause: pauseSound}] = useSound(countdownTheme);\r\n\r\n    const [buzzTime, setBuzzTime] = useState<number | undefined>(undefined);\r\n    const [p1HasDeclared, setP1HasDeclared] = useState(false);\r\n    const [p2HasDeclared, setP2HasDeclared] = useState(false);\r\n\r\n    const startRound = () => {\r\n        const [scramble, answer] = randomConundrum();\r\n        dispatch.current(revealConundrum(scramble, answer));\r\n        resume();\r\n    };\r\n\r\n    const resume = () => {\r\n        startSound({});\r\n        resumeTimer();\r\n        setRoundState(ConundrumRoundState.TICKING);\r\n    };\r\n\r\n    const buzz = () => {\r\n        pauseSound();\r\n        stopTimer();\r\n        setBuzzTime(32 - timeRemaining);\r\n        setRoundState(ConundrumRoundState.GUESSING);\r\n    };\r\n\r\n    const incorrect = () => {\r\n        setRoundState(ConundrumRoundState.INCORRECT);\r\n    }\r\n\r\n    const expired = () => {\r\n        expireTimer();\r\n        setRoundState(ConundrumRoundState.EXPIRED);\r\n    }\r\n\r\n    const solved = () => {\r\n        expireTimer();\r\n        setRoundState(ConundrumRoundState.SOLVED);\r\n    }\r\n\r\n    const declareForP1 = (guess: string) => {\r\n        setP1HasDeclared(true);\r\n        dispatch.current(setP1ConundrumDeclaration(buzzTime as number, guess));\r\n        if (guess !== answer && !p2HasDeclared) incorrect();\r\n        else if (guess !== answer) expired();\r\n        else solved();\r\n    }\r\n\r\n    const declareForP2 = (guess: string) => {\r\n        setP2HasDeclared(true);\r\n        dispatch.current(setP2ConundrumDeclaration(buzzTime as number, guess));\r\n        if (guess !== answer && !p1HasDeclared) incorrect();\r\n        else if (guess !== answer) expired();\r\n        else solved();\r\n    }\r\n\r\n    return { roundState, startRound, buzz, resume, p1HasDeclared, declareForP1, p2HasDeclared, declareForP2, timeRemaining, isRunning, isExpired };\r\n}\r\n\r\nconst randomConundrum = (): [string, string] => {\r\n    const answer = pickRandomConundrumAnswer();\r\n    const shuffle = decentShuffle();\r\n    const scrambleLetters = shuffle.map(i => answer[i]);\r\n    return [scrambleLetters.join(''), answer];\r\n};\r\n\r\nconst pickRandomConundrumAnswer = (): string => {\r\n    const numberOfConundrums = conundrums.conundrums.length;\r\n    return conundrums.conundrums[Math.floor(numberOfConundrums * Math.random())];\r\n};\r\n\r\nconst decentShuffle = (): number[] => {\r\n    const shuffle = singleShuffle();\r\n    if (inversions(shuffle) >= 18) return shuffle;\r\n    return shuffle.reverse();\r\n};\r\n\r\nconst inversions = (shuffle: number[]): number => {\r\n    let inversions = 0;\r\n    for (let i = 0; i < shuffle.length; ++i) {\r\n        for (let j = 0; j < shuffle.length; ++j) {\r\n            if (shuffle[i] > shuffle[j]) ++inversions;\r\n        }\r\n    }\r\n    return inversions;\r\n};\r\n\r\nconst singleShuffle = () => {\r\n    const items = [...Array(9)].map((_, idx) => idx);\r\n    for (let i = items.length - 1; i > 0; --i) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [items[i], items[j]] = [items[j], items[i]];\r\n    }\r\n    return items;\r\n};\r\n","import React, { useState, KeyboardEvent as KEvent } from 'react';\r\nimport './ConundrumRound.css';\r\n\r\nimport { CountdownGame, ConundrumRound } from '../../game/game';\r\nimport { CountdownAction, solveConundrum, endRound } from '../../game/actions';\r\nimport { getCurrentRound, getP1TotalScore, getP2TotalScore } from '../../game/selectors';\r\nimport useConundrum, { ConundrumRoundState } from '../../hooks/useConundrum';\r\nimport Selection from '../Selection/Selection';\r\nimport Timer from '../Timer/Timer';\r\nimport useEventListener from '../../hooks/useEventListener';\r\n\r\nexport interface ConundrumRoundProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst ConundrumRoundComponent: React.FC<ConundrumRoundProps> = ({game, dispatch}) => {\r\n\r\n    const round = getCurrentRound(game) as ConundrumRound;\r\n\r\n    const [p1Declaration, setP1Declaration] = useState('');\r\n    const [p2Declaration, setP2Declaration] = useState('');\r\n\r\n    const initialRoundState = () => {\r\n        if (round.solved) return ConundrumRoundState.SOLVED;\r\n        else return ConundrumRoundState.WAITING;\r\n    };\r\n    const { roundState, startRound, buzz, resume, p1HasDeclared, declareForP1, p2HasDeclared, declareForP2, timeRemaining } = useConundrum(initialRoundState(), dispatch, round.answer);\r\n\r\n    const selectionToShow = () => {\r\n        if (roundState === ConundrumRoundState.WAITING || roundState === ConundrumRoundState.GUESSING) return emptySelection();\r\n        else if (roundState === ConundrumRoundState.INCORRECT) return incorrectSelection();\r\n        else if (roundState === ConundrumRoundState.EXPIRED && !round.solved && p1HasDeclared && p2HasDeclared) return incorrectSelection();\r\n        else return getSelection(round);\r\n    };\r\n\r\n    const showBuzzer = roundState === ConundrumRoundState.TICKING && !round.solved && (!p1HasDeclared || !p2HasDeclared);\r\n    const showReveal = roundState === ConundrumRoundState.EXPIRED && !round.solved;\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n        if (e.keyCode === 32) {\r\n            if (roundState === ConundrumRoundState.WAITING) startRound();\r\n            else if (roundState === ConundrumRoundState.INCORRECT) resume();\r\n            else if (showBuzzer) buzz();\r\n            else if (showReveal) dispatch(solveConundrum());\r\n            else if (round.solved) dispatch(endRound());\r\n        }\r\n    }\r\n\r\n    const handleP1KeyDown = (e: KEvent) => {\r\n        if (e.keyCode === 13) {\r\n            declareForP1(p1Declaration);\r\n        }\r\n        e.stopPropagation();\r\n    }\r\n\r\n    const handleP2KeyDown = (e: KEvent) => {\r\n        if (e.keyCode === 13) {\r\n            declareForP2(p2Declaration);\r\n        }\r\n        e.stopPropagation();\r\n    }\r\n\r\n    useEventListener('keydown', handleKeyDown);\r\n\r\n    return (\r\n        <div className=\"conundrum-round\">\r\n            <div className=\"game__score\">{game.p1Name} {getP1TotalScore(game)} - {getP2TotalScore(game)} {game.p2Name}</div>\r\n            <div className=\"game__round-description\">Round {game.rounds.length}: Conundrum</div>\r\n            <div className=\"game__selection\">\r\n                <Selection selection={selectionToShow()}></Selection>\r\n            </div>\r\n            <div className=\"conundrum-round__timer\">\r\n                <Timer durationSeconds={30} secondsRemaining={Math.max(0, timeRemaining - 2)}></Timer>\r\n            </div>\r\n            {roundState === ConundrumRoundState.WAITING && <div className=\"conundrum-round__pick-actions\">\r\n                <button className=\"button--green\" onClick={startRound}>Reveal conundrum</button>\r\n            </div>}\r\n            {showBuzzer && <div className=\"conundrum-round__buzzer\">\r\n                <button className=\"button--red conundrum-round__buzz\" onClick={() => buzz()}>Buzz!</button>\r\n            </div>}\r\n            {roundState === ConundrumRoundState.INCORRECT && <div className=\"conundrum-round__resume\">\r\n                <button className=\"button--green conundrum-round__resume\" onClick={() => resume()}>Resume</button>\r\n            </div>}\r\n            {roundState === ConundrumRoundState.GUESSING && <div className=\"conundrum-round__declarations\">\r\n                <div className=\"conundrum-round__declaration\">\r\n                    <div className=\"conundrum-round__name\">{game.p1Name}</div>\r\n                    <input disabled={p1HasDeclared} type=\"text\" value={p1Declaration} onKeyDown={e => handleP1KeyDown(e)} onChange={e => setP1Declaration(e.target.value.toUpperCase())}></input>\r\n                    <button className=\"button--green\" disabled={p1HasDeclared} onClick={() => declareForP1(p1Declaration)}>Submit</button>\r\n                </div>\r\n                <div className=\"conundrum-round__declaration\">\r\n                    <div className=\"conundrum-round__name\">{game.p2Name}</div>\r\n                    <input disabled={p2HasDeclared} type=\"text\" value={p2Declaration} onKeyDown={e => handleP2KeyDown(e)} onChange={e => setP2Declaration(e.target.value.toUpperCase())}></input>\r\n                    <button className=\"button--green\" disabled={p2HasDeclared} onClick={() => declareForP2(p2Declaration)}>Submit</button>\r\n                </div>\r\n            </div>}\r\n            {showReveal && <div className=\"conundrum-round__solve-button\">\r\n                <button className=\"button--green\" onClick={() => dispatch(solveConundrum())}>Reveal answer</button>\r\n            </div>}\r\n            {(roundState === ConundrumRoundState.SOLVED || roundState === ConundrumRoundState.EXPIRED) && round.solved && <div className=\"conundrum-round__results\">\r\n                {round.p1Score > 0 && <span>Solved by {game.p1Name}!</span>}\r\n                {round.p2Score > 0 && <span>Solved by {game.p2Name}!</span>}\r\n                {round.p1Score === 0 && round.p2Score === 0 && <span>No-one solved it!</span>}\r\n                <button className=\"button--blue\" onClick={() => dispatch(endRound())}>End round</button>\r\n            </div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ConundrumRoundComponent;\r\n\r\nconst emptySelection = () => ['', '', '', '', '', '', '', '', ''];\r\n\r\nconst incorrectSelection = () => ['I', 'N', 'C', 'O', 'R', 'R', 'E', 'C', 'T'];\r\n\r\nconst getSelection = (round: ConundrumRound) => {\r\n    if (round.scramble === undefined) return emptySelection();\r\n    else if (!round.solved) return [...round.scramble];\r\n    else return [...round.answer];\r\n};\r\n","import React from 'react';\r\nimport './Recap.css';\r\n\r\nimport { CountdownGame, Round, LettersRound, NumbersRound, ConundrumRound } from '../../game/game';\r\nimport { getP1CumulativeScore, getP2CumulativeScore, getMaxCumulativeScore } from '../../game/selectors';\r\n\r\nexport interface RecapProps {\r\n    game: CountdownGame;\r\n}\r\n\r\nconst Recap: React.FC<RecapProps> = ({ game }) => {\r\n\r\n    const renderHeader = () => <tr>\r\n        <td>Round</td>\r\n        <td>Selection</td>\r\n        <td>{game.p1Name}</td>\r\n        <td>Score</td>\r\n        <td>{game.p2Name}</td>\r\n        <td>Best</td>\r\n        <td>Max Score</td>\r\n    </tr>;\r\n\r\n    const renderLettersRow = (round: LettersRound, index: number) => <tr key={index}>\r\n        <td>{index + 1}</td>\r\n        <td>{round.selection.join(' ')}</td>\r\n        <td className={round.p1Score > 0 ? '' : 'invalid'}>{round.p1Declaration}</td>\r\n        <td>{getP1CumulativeScore(game, index)} - {getP2CumulativeScore(game, index)}</td>\r\n        <td className={round.p2Score > 0 ? '' : 'invalid'}>{round.p2Declaration}</td>\r\n        <td title={round.maxes.join(', ')} className={round.maxes.length > 1 ? 'more-maxes' : ''}>{round.maxes[0]}</td>\r\n        <td>{getMaxCumulativeScore(game, index)}</td>\r\n    </tr>;\r\n\r\n    const renderNumbersRow = (round: NumbersRound, index: number) => <tr key={index}>\r\n        <td className=\"recap__round-number\">{index + 1}</td>\r\n        <td className=\"recap__numbers-selection\">{round.selection.join(' ')} → {round.target}</td>\r\n        <td className={round.p1Score > 0 ? '' : 'invalid'}>{round.p1Declaration}</td>\r\n        <td className=\"recap__score\">{getP1CumulativeScore(game, index)} - {getP2CumulativeScore(game, index)}</td>\r\n        <td className={round.p2Score > 0 ? '' : 'invalid'}>{round.p2Declaration}</td>\r\n        <td title={`${round.max.value} = ${round.max.method}`}>{round.max.value}</td>\r\n        <td>{getMaxCumulativeScore(game, index)}</td>\r\n    </tr>;\r\n\r\n    const renderConundrumRow = (round: ConundrumRound, index: number) => <tr key={index}>\r\n        <td className=\"recap__round-number\">{index + 1}</td>\r\n        <td className=\"recap__conundrum-selection\">{[...round.scramble].join(' ')}</td>\r\n        <td>\r\n            <div className={round.p1Score > 0 || !round.p1Declaration ? '' : 'invalid'}>{round.p1Declaration}</div>\r\n            {!!round.p1BuzzTime && <div>{normalizeBuzzTime(round.p1BuzzTime)} seconds</div>}\r\n        </td>\r\n        <td className=\"recap__score\">{getP1CumulativeScore(game, index)} - {getP2CumulativeScore(game, index)}</td>\r\n        <td>\r\n            <div className={round.p2Score > 0 || !round.p2Declaration ? '' : 'invalid'}>{round.p2Declaration}</div>\r\n            {!!round.p2BuzzTime && <div>{normalizeBuzzTime(round.p2BuzzTime)} seconds</div>}\r\n        </td>\r\n        <td>{round.p1Score === 0 && round.p2Score === 0 ? round.answer : ''}</td>\r\n        <td>{getMaxCumulativeScore(game, index)}</td>\r\n    </tr>;\r\n\r\n    const renderRoundRow = (round: Round, index: number) => {\r\n        switch (round.type) {\r\n            case 'LETTERS': return renderLettersRow(round, index);\r\n            case 'NUMBERS': return renderNumbersRow(round, index);\r\n            case 'CONUNDRUM': return renderConundrumRow(round, index);\r\n        }\r\n    };\r\n\r\n    const normalizeBuzzTime = (buzzTime: number) => {\r\n        let roundedBuzzTime = (Math.round(buzzTime * 4) / 4);\r\n        let adjustedBuzzTime = Math.min(30, Math.max(0.25, roundedBuzzTime - 0.5));\r\n        return adjustedBuzzTime.toFixed(2);\r\n    }\r\n\r\n    return (\r\n        <div className=\"recap\">\r\n            <table>\r\n                <thead>\r\n                    {renderHeader()}\r\n                </thead>\r\n                <tbody>\r\n                    {game.rounds.map((rd, idx) => renderRoundRow(rd, idx))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Recap;\r\n","import React from 'react';\r\nimport './GameOver.css';\r\n\r\nimport { CountdownGame } from '../../game/game';\r\nimport { CountdownAction, createNewGame } from '../../game/actions';\r\nimport { getP1TotalScore, getP2TotalScore } from '../../game/selectors';\r\nimport Selection from '../Selection/Selection';\r\nimport Recap from '../Recap/Recap';\r\n\r\nexport interface GameOverProps {\r\n    game: CountdownGame;\r\n    dispatch: (_: CountdownAction) => void;\r\n}\r\n\r\nconst GameOver: React.FC<GameOverProps> = ({game, dispatch}) => {\r\n    return (\r\n        <div className=\"game-over\">\r\n            <div className=\"game__selection\">\r\n                <Selection selection={['G', 'A', 'M', 'E', ' ', 'O', 'V', 'E', 'R']}></Selection>\r\n            </div>\r\n            <div className=\"game__score\">{game.p1Name} {getP1TotalScore(game)} - {getP2TotalScore(game)} {game.p2Name}</div>\r\n            <div className=\"game__recap\">\r\n                <Recap game={game}></Recap>\r\n            </div>\r\n            <button className=\"button--blue\" onClick={() => dispatch(createNewGame())}>Start New Game</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GameOver;\r\n","import React from 'react';\nimport './App.css';\n\nimport useCountdownGame from '../hooks/useCountdownGame';\nimport { getGameState } from '../game/selectors';\n\nimport NewGame from '../components/NewGame/NewGame';\nimport BetweenRounds from '../components/BetweenRounds/BetweenRounds';\nimport LettersRound from '../components/LettersRound/LettersRound';\nimport NumbersRound from '../components/NumbersRound/NumbersRound';\nimport ConundrumRound from '../components/ConundrumRound/ConundrumRound';\nimport GameOver from '../components/GameOver/GameOver';\nimport { createNewGame } from '../game/actions';\n\nfunction App() {\n\n    const [game, dispatch] = useCountdownGame();\n    const gameState = getGameState(game);\n\n    return (\n        <div className=\"app\">\n            <div className=\"app__abandon-link\">\n                {gameState !== 'WAITING' && gameState !== 'ENDED' && <button className=\"button--text\" onClick={() => dispatch(createNewGame())}>Abandon game</button>}\n            </div>\n            <div className=\"app__game\">\n                {gameState === 'WAITING' && <NewGame game={game} dispatch={dispatch}></NewGame>}\n                {gameState === 'BETWEEN' && <BetweenRounds game={game} dispatch={dispatch}></BetweenRounds>}\n                {gameState === 'LETTERS' && <LettersRound game={game} dispatch={dispatch}></LettersRound>}\n                {gameState === 'NUMBERS' && <NumbersRound game={game} dispatch={dispatch}></NumbersRound>}\n                {gameState === 'CONUNDRUM' && <ConundrumRound game={game} dispatch={dispatch}></ConundrumRound>}\n                {gameState === 'ENDED' && <GameOver game={game} dispatch={dispatch}></GameOver>}\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}